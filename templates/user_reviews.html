<head>
    <link rel="stylesheet" type="text/css" href="/static/user_reviews.css">
</head>

<body>
    {% extends "index.html" %}

    {% block section %}
    <div class="wrapper">
        <h2 class="text">{{id}} 리뷰</h2>
        <hr class="line1">

        <div class="topnav">
            <a href="/user_list/{{id}}/">판매내역</a>
            <a style="text-decoration: underline;" href="/user_reviews/{{id}}/">리뷰</a>
        </div>
        <hr class="line1">

        {% if total > 0 %}
        <p class="count_review">
            {{total}}개의 리뷰 (평균 {{star_avg}}점)
        </p>
        <input type="button" onclick="location.href = '/reg_review/{{id}}/'" class="reg-review" value="등록하기">

        <div class="review">
            {% for key, value in row1 %}
            <table>
                <td onclick="location.href='/details_of_review/{{value.sellerId}}/{{key}}/';" style="cursor:pointer;">
                    <div class="review-content">
                        <img src="/static/images/reviews/{{value.img_path}}">
                        <div>
                            <p><b>{{value.buyerId}}</b></p>
                            <p>{{value.reviewTitle}}</p>
                            <div class="rating">
                                {% for i in range(0, 5) %}
                                {% if i <= value.starsVariable|default(0)|int %} <span class="filled-star">★</span>
                                    {% else %}
                                    <span class="empty-star">☆</span>
                                    {% endif %}
                                    {% endfor %}
                            </div>
                        </div>
                    </div>
                </td>
            </table>
            {% endfor %}
        </div>
        {% if row1|length > 0 %}
        <hr class="line2">{% endif %}


        <div class="review">
            {% for key, value in row2 %}
            <table>
                <td onclick="location.href='/details_of_review/{{value.sellerId}}/{{key}}/';" style="cursor:pointer;">
                    <div class="review-content">
                        <img src="/static/images/reviews/{{value.img_path}}">
                        <div>
                            <p><b>{{value.buyerId}}</b></p>
                            <p>{{value.reviewTitle}}</p>
                            <div class="rating">
                                {% for i in range(0, 5) %}
                                {% if i <= value.starsVariable|default(0)|int %} <span class="filled-star">★</span>
                                    {% else %}
                                    <span class="empty-star">☆</span>
                                    {% endif %}
                                    {% endfor %}
                            </div>
                        </div>
                    </div>
                </td>
            </table>
            {% endfor %}
        </div>
        {% if row2|length > 0 %}
        <hr class="line2">{% endif %}

        <div class="review">
            {% for key, value in row3 %}
            <table>
                <td onclick="location.href='/details_of_review/{{value.sellerId}}/{{key}}/';" style="cursor:pointer;">
                    <div class="review-content">
                        <img src="/static/images/reviews/{{value.img_path}}">
                        <div>
                            <p><b>{{value.buyerId}}</b></p>
                            <p>{{value.reviewTitle}}</p>
                            <div class="rating">
                                {% for i in range(0, 5) %}
                                {% if i <= value.starsVariable|default(0)|int %} <span class="filled-star">★</span>
                                    {% else %}
                                    <span class="empty-star">☆</span>
                                    {% endif %}
                                    {% endfor %}
                            </div>
                        </div>
                    </div>
                </td>
            </table>
            {% endfor %}
        </div>
        {% if row3|length > 0 %}
        <hr class="line2">{% endif %}

        <div class="review">
            {% for key, value in row4 %}
            <table>
                <td onclick="location.href='/details_of_review/{{value.sellerId}}/{{key}}/';" style="cursor:pointer;">
                    <div class="review-content">
                        <img src="/static/images/reviews/{{value.img_path}}">
                        <div>
                            <p><b>{{value.buyerId}}</b></p>
                            <p>{{value.reviewTitle}}</p>
                            <div class="rating">
                                {% for i in range(0, 5) %}
                                {% if i <= value.starsVariable|default(0)|int %} <span class="filled-star">★</span>
                                    {% else %}
                                    <span class="empty-star">☆</span>
                                    {% endif %}
                                    {% endfor %}
                            </div>
                        </div>
                    </div>
                </td>
            </table>
            {% endfor %}
        </div>
        {% if row4|length > 0 %}
        <hr class="line2">{% endif %}

        <div class="review">
            {% for key, value in row5 %}
            <table>
                <td onclick="location.href='/details_of_review/{{value.sellerId}}/{{key}}/';" style="cursor:pointer;">
                    <div class="review-content">
                        <img src="/static/images/reviews/{{value.img_path}}">
                        <div>
                            <p><b>{{value.buyerId}}</b></p>
                            <p>{{value.reviewTitle}}</p>
                            <div class="rating">
                                {% for i in range(0, 5) %}
                                {% if i <= value.starsVariable|default(0)|int %} <span class="filled-star">★</span>
                                    {% else %}
                                    <span class="empty-star">☆</span>
                                    {% endif %}
                                    {% endfor %}
                            </div>
                        </div>
                    </div>
                </td>
            </table>
            {% endfor %}
        </div>
        {% if row5|length > 0 %}
        <hr class="line2">{% endif %}

        <div class="page-wrap">
            <div class="page-nation">
                <ul>
                    <li>
                        {% for i in range(page_count) %}
                        <a href="{{url_for('view_user_reviews', id=id, page=i)}}" color="black">{{i+1}}</a>
                        {% endfor %}
                    </li>
                </ul>
            </div>
        </div>

        {% else %}
        <p>
            등록된 리뷰가 없습니다.
        </p><br><br>
        <input type="button" onclick="location.href = '/reg_review/{{id}}/'" class="reg-review" value="등록하기"
            style="position: relative; right: 0px;">
        {% endif %}
    </div>

    <script>
        if ("{{session['id']}}" == "{{id}}") {
            reg_reviews = document.getElementsByClassName("reg-review");
            for (i = 0; i < reg_reviews.length; i++) {
                reg_reviews.item(i).style.visibility = "hidden";
            }
        }
    </script>
    {% endblock section %}
</body>